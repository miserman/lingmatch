<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="lingmatch">
<title>Introduction to Word Vectors • lingmatch</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Introduction to Word Vectors">
<meta property="og:description" content="lingmatch">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">lingmatch</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.6</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Guides</h6>
    <a class="dropdown-item" href="../articles/quickstart.html">Quick Start</a>
    <a class="dropdown-item" href="../articles/groups.html">Group Comparisons</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Introductions</h6>
    <a class="dropdown-item" href="../articles/introduction.html">Text Analysis</a>
    <a class="dropdown-item" href="../articles/word_vectors.html">Word Vectors</a>
    <a class="dropdown-item" href="../articles/text_classification.html">Text Classification</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/miserman/lingmatch/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Introduction to Word Vectors</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/miserman/lingmatch/blob/HEAD/vignettes/word_vectors.Rmd" class="external-link"><code>vignettes/word_vectors.Rmd</code></a></small>
      <div class="d-none name"><code>word_vectors.Rmd</code></div>
    </div>

    
    
<p>Introduces the concept of word vectors and their use in measures of
text similarity.</p>
<p><em>Built with R 4.3.1 on August 13 2023</em></p>
<hr>
<p>A vector in this context is any set of values that represent one
thing, so word vectors are fundamental to a bag-of-words framework.
Usually, “word vectors” refers to sets of loadings onto calculated or
learned latent dimensions (factors, clusters, components), but as part
of a bag-of-words framework, vectors can range from those in a standard
document-term matrix (as term counts within or between documents), to
weightings and reductions of that space.</p>
<p>When loadings onto dimensions, sets of word vectors are sometimes
called something along the lines of latent semantic spaces, embeddings,
or distributed word representations. <em>Latent</em> loosely refers to
the way information is stored within a dimension (the same concept as in
factor or cluster analysis generally, as in Latent Dirichlet
Allocation). <em>Semantic</em> refers to the word meanings that can be
captured by dimensions, as seen in similarity between word vectors; the
word’s more precise meaning is represented across dimensions of more
general and more latent meaning (in which sense it is also a
<em>distributed</em> representation, though that could apply to any
vector representation). <em>Embedding</em> either generally refers to
the way word vectors are contained within the broader vector space, or,
more specifically, to the way word meanings are contained within the
broader semantic space.</p>
<div class="section level2">
<h2 id="in-sample-vectors">In-sample vectors<a class="anchor" aria-label="anchor" href="#in-sample-vectors"></a>
</h2>
<p>The
<a href="https://miserman.github.io/lingmatch/articles/introduction.html" target="_blank" rel="nofollow">introduction</a>
mostly focused on the representation of documents as vectors within a
common document-term space. With that same representation, we can focus
on the term vectors instead.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://miserman.github.io/splot/" class="external-link">splot</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/miserman/lingmatch" class="external-link">lingmatch</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">texts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"Frogs are small."</span>,</span>
<span>  <span class="st">"Crickets are small."</span>,</span>
<span>  <span class="st">"Horses are big."</span>,</span>
<span>  <span class="st">"Whales are big."</span></span>
<span><span class="op">)</span></span>
<span><span class="op">(</span><span class="va">dtm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/lma_dtm.html">lma_dtm</a></span><span class="op">(</span><span class="va">texts</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; 4 x 7 sparse Matrix of class "dgCMatrix"</span></span>
<span><span class="co">#&gt;      are big crickets frogs horses small whales</span></span>
<span><span class="co">#&gt; [1,]   1   .        .     1      .     1      .</span></span>
<span><span class="co">#&gt; [2,]   1   .        1     .      .     1      .</span></span>
<span><span class="co">#&gt; [3,]   1   1        .     .      1     .      .</span></span>
<span><span class="co">#&gt; [4,]   1   1        .     .      .     .      1</span></span></code></pre></div>
<p>Here, columns represent words in terms of their occurrence in 4
contexts (here, sentences), and rows provide co-occurrence
information.</p>
<div class="section level3">
<h3 id="similarity-based-latent-dimensions">Similarity-based latent dimensions<a class="anchor" aria-label="anchor" href="#similarity-based-latent-dimensions"></a>
</h3>
<p>Comparing word vectors can provide semantic information. For example,
we can see which animals co-occur with different attributes:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># the t function transposes the document-term matrix</span></span>
<span><span class="co"># such that terms are in rows and documents in columns</span></span>
<span><span class="va">tdm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/t.html" class="external-link">t</a></span><span class="op">(</span><span class="va">dtm</span><span class="op">)</span></span>
<span><span class="op">(</span><span class="va">attribute_loadings</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/lma_simets.html">lma_simets</a></span><span class="op">(</span><span class="va">tdm</span>, <span class="va">tdm</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"small"</span>, <span class="st">"big"</span><span class="op">)</span>, <span class="op">]</span>, <span class="st">"canberra"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; 7 x 2 sparse Matrix of class "dgCMatrix"</span></span>
<span><span class="co">#&gt;          small  big</span></span>
<span><span class="co">#&gt; are       0.50 0.50</span></span>
<span><span class="co">#&gt; big       0.00 1.00</span></span>
<span><span class="co">#&gt; crickets  0.75 0.25</span></span>
<span><span class="co">#&gt; frogs     0.75 0.25</span></span>
<span><span class="co">#&gt; horses    0.25 0.75</span></span>
<span><span class="co">#&gt; small     1.00 0.00</span></span>
<span><span class="co">#&gt; whales    0.25 0.75</span></span>
<span></span>
<span><span class="co"># note that dark = TRUE makes the text white, so you might need to remove it</span></span>
<span><span class="fu"><a href="https://miserman.github.io/splot/reference/splot.html" class="external-link">splot</a></span><span class="op">(</span></span>
<span>  <span class="va">attribute_loadings</span><span class="op">[</span>, <span class="fl">1</span><span class="op">]</span> <span class="op">~</span> <span class="va">attribute_loadings</span><span class="op">[</span>, <span class="fl">2</span><span class="op">]</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"scatter"</span>,</span>
<span>  lines <span class="op">=</span> <span class="cn">FALSE</span>, laby <span class="op">=</span> <span class="st">"smallness"</span>, labx <span class="op">=</span> <span class="st">"bigness"</span>, dark <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  add <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/graphics/text.html" class="external-link">text</a></span><span class="op">(</span></span>
<span>    <span class="va">y</span> <span class="op">+</span> <span class="fl">.05</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="op">-</span><span class="fl">.09</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="op">-</span><span class="fl">.09</span><span class="op">)</span> <span class="op">~</span> <span class="va">x</span>,</span>
<span>    labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">attribute_loadings</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="word_vectors_files/figure-html/unnamed-chunk-3-1.svg" width="960"></p>
<p>The similarity measures between raw occurrence vectors form new,
collapsed vectors—instead of corresponding to documents, columns in this
new space represent attributes. These new vectors can then be used to
make document comparisons more flexible.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># documents are already similar as expected</span></span>
<span><span class="co"># (with 1 &lt;-&gt; 2 and 3 &lt;-&gt; 4 being more, the rest less similar)</span></span>
<span><span class="co"># due to their overlap in the attribute words</span></span>
<span><span class="fu"><a href="../reference/lma_simets.html">lma_simets</a></span><span class="op">(</span><span class="va">dtm</span>, <span class="st">"canberra"</span><span class="op">)</span></span>
<span><span class="co">#&gt; 4 x 4 sparse Matrix of class "dtCMatrix" (unitriangular)</span></span>
<span><span class="co">#&gt;                                     </span></span>
<span><span class="co">#&gt; [1,] I         .         .         .</span></span>
<span><span class="co">#&gt; [2,] 0.7142857 I         .         .</span></span>
<span><span class="co">#&gt; [3,] 0.4285714 0.4285714 I         .</span></span>
<span><span class="co">#&gt; [4,] 0.4285714 0.4285714 0.7142857 I</span></span>
<span></span>
<span><span class="co"># but mapping them to the attribute space</span></span>
<span><span class="co"># (dtm %*% space, forming a Document-Dimension Matrix)</span></span>
<span><span class="op">(</span><span class="va">ddm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/lma_lspace.html">lma_lspace</a></span><span class="op">(</span><span class="va">dtm</span>, space <span class="op">=</span> <span class="va">attribute_loadings</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; 4 x 2 sparse Matrix of class "dgCMatrix"</span></span>
<span><span class="co">#&gt;      small  big</span></span>
<span><span class="co">#&gt; [1,]  2.25 0.75</span></span>
<span><span class="co">#&gt; [2,]  2.25 0.75</span></span>
<span><span class="co">#&gt; [3,]  0.75 2.25</span></span>
<span><span class="co">#&gt; [4,]  0.75 2.25</span></span>
<span></span>
<span><span class="co"># the similarity between animal words can also contribute</span></span>
<span><span class="fu"><a href="../reference/lma_simets.html">lma_simets</a></span><span class="op">(</span><span class="va">ddm</span>, <span class="st">"canberra"</span><span class="op">)</span></span>
<span><span class="co">#&gt; 4 x 4 sparse Matrix of class "dtCMatrix" (unitriangular)</span></span>
<span><span class="co">#&gt;                 </span></span>
<span><span class="co">#&gt; [1,] I   .   . .</span></span>
<span><span class="co">#&gt; [2,] 1.0 I   . .</span></span>
<span><span class="co">#&gt; [3,] 0.5 0.5 I .</span></span>
<span><span class="co">#&gt; [4,] 0.5 0.5 1 I</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="pretrained-vectors">Pretrained vectors<a class="anchor" aria-label="anchor" href="#pretrained-vectors"></a>
</h2>
<p>This is a very tidy and narrow example in terms of the texts and
semantic space creation, but it illustrates the kind of co-occurrence
information that is being used in more abstracted examples. To get
appropriate co-occurrence information for a larger set of words, you
need many and diverse observations of their use, which is why large
corpora are usually used to train embeddings. The latent dimensions of
general-use spaces are also not usually similarities to single seed
words, but are instead optimized, such as by some form of matrix
factorization or a neural network.</p>
<p>Pretrained spaces like this are available on Open Science Framework
(<a href="https://osf.io/489he/wiki/home" class="external-link">osf.io/489he</a>), and will be
downloaded if necessary when you run the functions that depend on them
if you specify a directory or set the directory options (you can run
<code>lma_initdirs('~')</code> to initialize the default locations).</p>
<div class="section level3">
<h3 id="embeddings-mapped-similarity">Embeddings-mapped similarity<a class="anchor" aria-label="anchor" href="#embeddings-mapped-similarity"></a>
</h3>
<p>Similarity between documents that have been mapped to embeddings is
sometimes called Latent Semantic Similarity <span class="citation">(<a href="#ref-landauer:1997">Landauer &amp; Dumais, 1997</a>)</span> or
Word Centroid (inverse) Distance <span class="citation">(<a href="#ref-kusner:2015">Kusner et al., 2015</a>)</span>. Both of these
measures have common parameter decisions associated with them.</p>
<p>For Latent Semantic Similarity, the Document-Term Matrix is usually
initially weighted (as by Term-Frequency Inverse Document Frequency or
Pointwise Mutual Information schemes), and has stop words removed
(though that isn’t relevant in this case, since “are” appears in all
documents), then mapped to a Singular Value Decomposition space, and
similarity is measured by cosine similarity. These settings are default
for the <code>'lsa'</code> type (using the “100k_lsa” space):</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/lingmatch.html">lingmatch</a></span><span class="op">(</span><span class="va">texts</span>, type <span class="op">=</span> <span class="st">"lsa"</span><span class="op">)</span><span class="op">$</span><span class="va">sim</span></span>
<span><span class="co">#&gt; 4 x 4 sparse Matrix of class "dtCMatrix" (unitriangular)</span></span>
<span><span class="co">#&gt;                                    </span></span>
<span><span class="co">#&gt; [1,] I         .         .        .</span></span>
<span><span class="co">#&gt; [2,] 0.9958587 I         .        .</span></span>
<span><span class="co">#&gt; [3,] 0.3360165 0.3182474 I        .</span></span>
<span><span class="co">#&gt; [4,] 0.4092065 0.3831958 0.751225 I</span></span></code></pre></div>
<p>For Word Centroid Distance, the DTM usually also has stop words
removed, but might then be frequency weighted (normalized), mapped to a
word2vec space, and have distances measured by Euclidean distance (which
is inverted here for similarity):</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/lingmatch.html">lingmatch</a></span><span class="op">(</span></span>
<span>  <span class="va">texts</span>,</span>
<span>  exclude <span class="op">=</span> <span class="st">"function"</span>, weight <span class="op">=</span> <span class="st">"freq"</span>,</span>
<span>  space <span class="op">=</span> <span class="st">"google"</span>, metric <span class="op">=</span> <span class="st">"euclidean"</span></span>
<span><span class="op">)</span><span class="op">$</span><span class="va">sim</span></span>
<span><span class="co">#&gt; 4 x 4 sparse Matrix of class "dtCMatrix" (unitriangular)</span></span>
<span><span class="co">#&gt;                                        </span></span>
<span><span class="co">#&gt; [1,] I          .          .          .</span></span>
<span><span class="co">#&gt; [2,] 0.01980396 I          .          .</span></span>
<span><span class="co">#&gt; [3,] 0.01233601 0.01213053 I          .</span></span>
<span><span class="co">#&gt; [4,] 0.01169420 0.01111124 0.01187304 I</span></span></code></pre></div>
<p>These parameter decisions are often left unexamined, but have some
potential to affect the ultimate characterization of the texts. One of
<code>lingmatch</code>’s goals is to make some of these parameters easy
to play with. See the
<a href="https://miserman.github.io/lingmatch/articles/text_classification.html" rel="nofollow" target="_blank">text
classification vignette</a> for an example of this.</p>
</div>
<div class="section level3">
<h3 id="choosing-a-space">Choosing a space<a class="anchor" aria-label="anchor" href="#choosing-a-space"></a>
</h3>
<div class="section level4">
<h4 id="term-coverage">Term coverage<a class="anchor" aria-label="anchor" href="#term-coverage"></a>
</h4>
<p>One simple thing to look at when choosing a space is its coverage of
the terms that appear in your set of texts. You can do this without
downloading all spaces by looking at the <a href="https://osf.io/yauzm" class="external-link">common term map</a>, which is what the
<code>select.lspace</code> function does when terms are entered as the
first argument:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># some relatively rare terms for their formatting or narrow uses</span></span>
<span><span class="va">terms</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"part-time"</span>, <span class="st">"i/o"</span>, <span class="st">"'cause"</span>, <span class="st">"brexit"</span>, <span class="st">"debuffs"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># select.lspace returns more information about each space,</span></span>
<span><span class="co"># as well as the full common term map</span></span>
<span><span class="va">spaces</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/select.lspace.html">select.lspace</a></span><span class="op">(</span>terms <span class="op">=</span> <span class="va">terms</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># the "selected" entry contains the top 5 spaces in terms of coverage</span></span>
<span><span class="va">spaces</span><span class="op">$</span><span class="va">selected</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"terms"</span>, <span class="st">"coverage"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">#&gt;                   terms coverage</span></span>
<span><span class="co">#&gt; CoNLL17_skipgram 459818      1.0</span></span>
<span><span class="co">#&gt; facebook_crawl    81653      0.8</span></span>
<span><span class="co">#&gt; glove_crawl      467538      0.8</span></span>
<span><span class="co">#&gt; paragram_sl999   456295      0.8</span></span>
<span><span class="co">#&gt; paragram_ws353   456295      0.8</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="term-similarity">Term similarity<a class="anchor" aria-label="anchor" href="#term-similarity"></a>
</h4>
<p>Another possible, though more intensive thing to look at might be
similarities between words of particular interest. In our initial set of
texts, for example, we were looking at animals in relation to
attributes, so we might look at those relationships in whatever spaces
you’ve downloaded:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># retrieve names of downloaded spaces</span></span>
<span><span class="va">space_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">sub</a></span><span class="op">(</span><span class="st">"\\..*$"</span>, <span class="st">""</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="st">"~/Latent Semantic Spaces"</span>, <span class="st">"dat"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># define a few terms of interest</span></span>
<span><span class="va">terms</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"small"</span>, <span class="st">"big"</span>, <span class="st">"frogs"</span>, <span class="st">"crickets"</span>, <span class="st">"horses"</span>, <span class="st">"whales"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># retrieve the terms from each space,</span></span>
<span><span class="co"># and calculate their similarities if all are found</span></span>
<span><span class="va">similarities</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">rbind</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">space_names</span>, <span class="kw">function</span><span class="op">(</span><span class="va">name</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">lss</span> <span class="op">&lt;-</span> <span class="kw"><a href="https://rdrr.io/r/base/conditions.html" class="external-link">tryCatch</a></span><span class="op">(</span><span class="fu"><a href="../reference/lma_lspace.html">lma_lspace</a></span><span class="op">(</span><span class="va">terms</span>, <span class="va">name</span><span class="op">)</span>, error <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">e</span><span class="op">)</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/all.html" class="external-link">all</a></span><span class="op">(</span><span class="va">terms</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">lss</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="../reference/lma_simets.html">lma_simets</a></span><span class="op">(</span><span class="va">lss</span>, <span class="st">"canberra"</span><span class="op">)</span><span class="op">@</span><span class="va">x</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">terms</span><span class="op">)</span> <span class="op">*</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">terms</span><span class="op">)</span> <span class="op">-</span> <span class="fl">1</span><span class="op">)</span> <span class="op">/</span> <span class="fl">2</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dimnames.html" class="external-link">dimnames</a></span><span class="op">(</span><span class="va">similarities</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  <span class="va">space_names</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/outer.html" class="external-link">outer</a></span><span class="op">(</span><span class="va">terms</span>, <span class="va">terms</span>, <span class="va">paste</span>, sep <span class="op">=</span> <span class="st">" &lt;-&gt; "</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/lower.tri.html" class="external-link">lower.tri</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/diag.html" class="external-link">diag</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">terms</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># sort by relationships of interest,</span></span>
<span><span class="co"># where, e.g., horses &lt;-&gt; big and frogs &lt;-&gt; small should be big,</span></span>
<span><span class="co"># and frogs &lt;-&gt; horses should be small</span></span>
<span><span class="va">weights</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/structure.html" class="external-link">structure</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="op">-</span><span class="fl">.5</span>, <span class="op">-</span><span class="fl">.5</span>, <span class="op">-</span><span class="fl">.5</span>, <span class="op">-</span><span class="fl">.5</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="op">-</span><span class="fl">.5</span>, <span class="op">-</span><span class="fl">.5</span>, <span class="op">-</span><span class="fl">.5</span>, <span class="op">-</span><span class="fl">.5</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">similarities</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">similarities</span> <span class="op">&lt;-</span> <span class="va">similarities</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html" class="external-link">order</a></span><span class="op">(</span><span class="op">-</span><span class="va">similarities</span> <span class="op"><a href="https://rdrr.io/r/base/matmult.html" class="external-link">%*%</a></span> <span class="va">weights</span><span class="op">)</span>, <span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/t.html" class="external-link">t</a></span><span class="op">(</span><span class="va">similarities</span><span class="op">[</span><span class="fl">1</span>, <span class="va">weights</span> <span class="op">==</span> <span class="fl">1</span>, drop <span class="op">=</span> <span class="cn">FALSE</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt;                         100k</span></span>
<span><span class="co">#&gt; frogs &lt;-&gt; small    0.3177957</span></span>
<span><span class="co">#&gt; crickets &lt;-&gt; small 0.3011583</span></span>
<span><span class="co">#&gt; horses &lt;-&gt; big     0.2848507</span></span>
<span><span class="co">#&gt; whales &lt;-&gt; big     0.2696833</span></span>
<span><span class="co">#&gt; crickets &lt;-&gt; frogs 0.4812112</span></span>
<span><span class="co">#&gt; whales &lt;-&gt; horses  0.3230661</span></span>
<span></span>
<span><span class="co"># retrieve the attribute similarities in the best space</span></span>
<span><span class="va">sims_best</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span></span>
<span>  smallness <span class="op">=</span> <span class="va">similarities</span><span class="op">[</span><span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></span><span class="op">(</span><span class="st">"small"</span>, <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">similarities</span><span class="op">)</span><span class="op">)</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,</span>
<span>  bigness <span class="op">=</span> <span class="va">similarities</span><span class="op">[</span><span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></span><span class="op">(</span><span class="st">"big"</span>, <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">similarities</span><span class="op">)</span><span class="op">)</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># and look at where the animal words fall within that attribute space</span></span>
<span><span class="fu"><a href="https://miserman.github.io/splot/reference/splot.html" class="external-link">splot</a></span><span class="op">(</span></span>
<span>  <span class="va">smallness</span> <span class="op">~</span> <span class="va">bigness</span>, <span class="va">sims_best</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"scatter"</span>, dark <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  lines <span class="op">=</span> <span class="cn">FALSE</span>, add <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/graphics/text.html" class="external-link">text</a></span><span class="op">(</span><span class="va">y</span> <span class="op">+</span> <span class="fl">.0017</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/AsIs.html" class="external-link">I</a></span><span class="op">(</span><span class="va">x</span> <span class="op">+</span> <span class="fl">3e-4</span><span class="op">)</span>, labels <span class="op">=</span> <span class="va">terms</span><span class="op">[</span><span class="op">-</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="word_vectors_files/figure-html/unnamed-chunk-8-1.svg" width="960"></p>
</div>
<div class="section level4">
<h4 id="concept-capture">Concept capture<a class="anchor" aria-label="anchor" href="#concept-capture"></a>
</h4>
<p>One of the problems embeddings try to solve is the crispiness of
single terms—there may be many terms that are strictly different but
have similar meanings. With that in mind, it might also make sense to
fuzzify target dimensions in the above example with something like
synonym centroids or concept vectors:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># now our attributes will be sets of terms</span></span>
<span><span class="va">concepts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  small <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"small"</span>, <span class="st">"little"</span>, <span class="st">"tiny"</span>, <span class="st">"miniscule"</span>, <span class="st">"diminutive"</span><span class="op">)</span>,</span>
<span>  big <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"big"</span>, <span class="st">"large"</span>, <span class="st">"huge"</span>, <span class="st">"massive"</span>, <span class="st">"enormous"</span>, <span class="st">"gigantic"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># extract all single terms from the space</span></span>
<span><span class="va">lss_exp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/lma_lspace.html">lma_lspace</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">terms</span>, <span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="va">concepts</span><span class="op">)</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">similarities</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># then replace the initial seed word vectors with their aggregated versions</span></span>
<span><span class="va">lss_exp</span><span class="op">[</span><span class="st">"small"</span>, <span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/Matrix/man/colSums.html" class="external-link">colMeans</a></span><span class="op">(</span><span class="va">lss_exp</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">lss_exp</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">concepts</span><span class="op">$</span><span class="va">small</span>, <span class="op">]</span><span class="op">)</span></span>
<span><span class="va">lss_exp</span><span class="op">[</span><span class="st">"big"</span>, <span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/Matrix/man/colSums.html" class="external-link">colMeans</a></span><span class="op">(</span><span class="va">lss_exp</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">lss_exp</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">concepts</span><span class="op">$</span><span class="va">big</span>, <span class="op">]</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># calculate similarities to those new aggregate vectors</span></span>
<span><span class="va">sims_best_fuz</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/lma_simets.html">lma_simets</a></span><span class="op">(</span></span>
<span>  <span class="va">lss_exp</span><span class="op">[</span><span class="va">terms</span>, <span class="op">]</span>, <span class="st">"canberra"</span>,</span>
<span>  symmetrical <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span><span class="op">[</span><span class="op">-</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"small"</span>, <span class="st">"big"</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># and see if animal relationships are improved</span></span>
<span><span class="fu"><a href="https://miserman.github.io/splot/reference/splot.html" class="external-link">splot</a></span><span class="op">(</span></span>
<span>  <span class="va">sims_best_fuz</span><span class="op">[</span>, <span class="st">"small"</span><span class="op">]</span> <span class="op">~</span> <span class="va">sims_best_fuz</span><span class="op">[</span>, <span class="st">"big"</span><span class="op">]</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"scatter"</span>,</span>
<span>  lines <span class="op">=</span> <span class="cn">FALSE</span>, laby <span class="op">=</span> <span class="st">"smallness"</span>, labx <span class="op">=</span> <span class="st">"bigness"</span>, dark <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  add <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/graphics/text.html" class="external-link">text</a></span><span class="op">(</span><span class="va">y</span> <span class="op">+</span> <span class="fl">.0014</span> <span class="op">~</span> <span class="va">x</span>, labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">sims_best_fuz</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="word_vectors_files/figure-html/unnamed-chunk-9-1.svg" width="960">
The best way to learn animal attributes in general would probably come
down to the training texts, which might start to look like research in
personality psychology on clusters in words used to describe people
<span class="citation">(e.g., <a href="#ref-thurstone:1934">Thurstone,
1934</a>)</span>.</p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="dimensions-as-topics">Dimensions as topics<a class="anchor" aria-label="anchor" href="#dimensions-as-topics"></a>
</h2>
<p>Topic extraction tends to use models fit within a sample, and
considers fewer dimensions. Its goal is often to interpret dimensions
directly by inspecting the highest loading terms, which can result in
something like a dictionary—sets of topics or categories containing
associated terms. By loading in a full space (as opposed to just a
selection of vectors, as we’ve been doing), we can look at the same
thing in pretrained embeddings:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># load in the full "100k" space</span></span>
<span><span class="va">lss</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/lma_lspace.html">lma_lspace</a></span><span class="op">(</span><span class="st">"100k"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/structure.html" class="external-link">structure</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">lss</span><span class="op">)</span>, names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"terms"</span>, <span class="st">"dimensions"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;      terms dimensions </span></span>
<span><span class="co">#&gt;      99188        300</span></span>
<span></span>
<span><span class="co"># make a function to more easily retrieve terms</span></span>
<span><span class="va">top_terms</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">dims</span>, <span class="va">space</span>, <span class="va">nterms</span> <span class="op">=</span> <span class="fl">30</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">terms</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/Matrix/man/colSums.html" class="external-link">rowMeans</a></span><span class="op">(</span><span class="va">space</span><span class="op">[</span>, <span class="va">dims</span>, drop <span class="op">=</span> <span class="cn">FALSE</span><span class="op">]</span><span class="op">)</span>, <span class="cn">TRUE</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_len</a></span><span class="op">(</span><span class="va">nterms</span><span class="op">)</span><span class="op">]</span></span>
<span>  <span class="fu"><a href="https://miserman.github.io/splot/reference/splot.html" class="external-link">splot</a></span><span class="op">(</span></span>
<span>    <span class="va">terms</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">terms</span><span class="op">)</span>,</span>
<span>    colorby <span class="op">=</span> <span class="va">terms</span>, leg <span class="op">=</span> <span class="cn">FALSE</span>, sort <span class="op">=</span> <span class="cn">TRUE</span>, dark <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    type <span class="op">=</span> <span class="st">"bar"</span>, laby <span class="op">=</span> <span class="cn">FALSE</span>, labx <span class="op">=</span> <span class="cn">FALSE</span>, title <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span></span>
<span>      <span class="st">"dimension"</span>,</span>
<span>      <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">dims</span><span class="op">)</span> <span class="op">!=</span> <span class="fl">1</span> <span class="op">&amp;&amp;</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">dims</span><span class="op">)</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">dims</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">dims</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="st">"-"</span>, <span class="va">dims</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">dims</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span>      <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">dims</span>, collapse <span class="op">=</span> <span class="st">", "</span><span class="op">)</span></span>
<span>      <span class="op">}</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co"># now we can see the top-loading terms on single dimensions</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">d</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span> <span class="fu">top_terms</span><span class="op">(</span><span class="va">d</span>, <span class="va">lss</span><span class="op">)</span></span></code></pre></div>
<p><img src="word_vectors_files/figure-html/unnamed-chunk-10-1.svg" width="960"><img src="word_vectors_files/figure-html/unnamed-chunk-10-2.svg" width="960"><img src="word_vectors_files/figure-html/unnamed-chunk-10-3.svg" width="960"></p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># or top-loading terms on aggregated dimensions</span></span>
<span><span class="fu">top_terms</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="va">lss</span><span class="op">)</span></span></code></pre></div>
<p><img src="word_vectors_files/figure-html/unnamed-chunk-10-4.svg" width="960"></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># even across all dimensions</span></span>
<span><span class="fu">top_terms</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_len</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">lss</span><span class="op">)</span><span class="op">)</span>, <span class="va">lss</span><span class="op">)</span></span></code></pre></div>
<p><img src="word_vectors_files/figure-html/unnamed-chunk-10-5.svg" width="960"></p>
<p>It can also be interesting to use a term to select dimensions to look
at:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># this selects the 10 dimensions on which "whales" loads most</span></span>
<span><span class="fu">top_terms</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/order.html" class="external-link">order</a></span><span class="op">(</span><span class="op">-</span><span class="va">lss</span><span class="op">[</span><span class="st">"whales"</span>, <span class="op">]</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span>, <span class="va">lss</span><span class="op">)</span></span></code></pre></div>
<p><img src="word_vectors_files/figure-html/unnamed-chunk-11-1.svg" width="960"></p>
</div>
<div class="section level2">
<h2 id="dictionaries-as-embeddings">Dictionaries as embeddings<a class="anchor" aria-label="anchor" href="#dictionaries-as-embeddings"></a>
</h2>
<p>It can also be kind of interesting to think of dictionaries as forms
of embeddings, either as binary or with weighted regions and sharp
drop-offs:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># take a small, weighted, sexed family dictionary</span></span>
<span><span class="va">family</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  female <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>mother <span class="op">=</span> <span class="fl">1</span>, wife <span class="op">=</span> <span class="fl">.9</span>, sister <span class="op">=</span> <span class="fl">.8</span>, grandma <span class="op">=</span> <span class="fl">.7</span>, aunt <span class="op">=</span> <span class="fl">.6</span><span class="op">)</span>,</span>
<span>  male <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>father <span class="op">=</span> <span class="fl">1</span>, husband <span class="op">=</span> <span class="fl">.9</span>, brother <span class="op">=</span> <span class="fl">.8</span>, grandpa <span class="op">=</span> <span class="fl">.7</span>, uncle <span class="op">=</span> <span class="fl">.6</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">family_terms</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">family</span>, <span class="va">names</span><span class="op">)</span>, use.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># then make a latent space out of it</span></span>
<span><span class="op">(</span><span class="va">family_space</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span></span>
<span>  family <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/structure.html" class="external-link">structure</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="va">family</span><span class="op">)</span>, names <span class="op">=</span> <span class="va">family_terms</span><span class="op">)</span>,</span>
<span>  female <span class="op">=</span> <span class="va">family_terms</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">family</span><span class="op">$</span><span class="va">female</span><span class="op">)</span>,</span>
<span>  male <span class="op">=</span> <span class="va">family_terms</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">family</span><span class="op">$</span><span class="va">male</span><span class="op">)</span></span>
<span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;         family female male</span></span>
<span><span class="co">#&gt; mother     1.0      1    0</span></span>
<span><span class="co">#&gt; wife       0.9      1    0</span></span>
<span><span class="co">#&gt; sister     0.8      1    0</span></span>
<span><span class="co">#&gt; grandma    0.7      1    0</span></span>
<span><span class="co">#&gt; aunt       0.6      1    0</span></span>
<span><span class="co">#&gt; father     1.0      0    1</span></span>
<span><span class="co">#&gt; husband    0.9      0    1</span></span>
<span><span class="co">#&gt; brother    0.8      0    1</span></span>
<span><span class="co">#&gt; grandpa    0.7      0    1</span></span>
<span><span class="co">#&gt; uncle      0.6      0    1</span></span></code></pre></div>
<p>In this simple space, you can solve analogies like you can in
pretrained spaces <span class="citation">(as in <a href="#ref-mikolov:2013">Mikolov et al., 2013</a>)</span>:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># function to abstract the process</span></span>
<span><span class="va">guess_analog</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, <span class="va">asx</span>, <span class="va">space</span>, <span class="va">metric</span> <span class="op">=</span> <span class="st">"canberra"</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="fu"><a href="../reference/lma_simets.html">lma_simets</a></span><span class="op">(</span></span>
<span>    <span class="va">space</span>, <span class="va">space</span><span class="op">[</span><span class="va">y</span>, <span class="op">]</span> <span class="op">-</span> <span class="va">space</span><span class="op">[</span><span class="va">x</span>, <span class="op">]</span> <span class="op">+</span> <span class="va">space</span><span class="op">[</span><span class="va">asx</span>, <span class="op">]</span>, <span class="va">metric</span></span>
<span>  <span class="op">)</span>, <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co">## i.e., sister is to brother as aunt is to _____.</span></span>
<span><span class="fu">guess_analog</span><span class="op">(</span><span class="st">"sister"</span>, <span class="st">"brother"</span>, <span class="st">"aunt"</span>, <span class="va">family_space</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span></span>
<span><span class="co">#&gt;    uncle  grandpa  brother </span></span>
<span><span class="co">#&gt; 1.000000 0.974359 0.952381</span></span>
<span></span>
<span><span class="co"># compare with a pretrained space in the same restricted term set</span></span>
<span><span class="fu">guess_analog</span><span class="op">(</span></span>
<span>  <span class="st">"sister"</span>, <span class="st">"brother"</span>, <span class="st">"aunt"</span>,</span>
<span>  <span class="fu"><a href="../reference/lma_lspace.html">lma_lspace</a></span><span class="op">(</span><span class="va">family_terms</span>, <span class="st">"google"</span><span class="op">)</span></span>
<span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span></span>
<span><span class="co">#&gt;     uncle      aunt    father </span></span>
<span><span class="co">#&gt; 0.5902633 0.5521642 0.5453535</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" line-spacing="2">
<div id="ref-kusner:2015" class="csl-entry">
Kusner, M., Sun, Y., Kolkin, N., &amp; Weinberger, K. (2015). From word
embeddings to document distances. <em>International Conference on
Machine Learning</em>, 957–966. <a href="http://proceedings.mlr.press/v37/kusnerb15.pdf" class="external-link">http://proceedings.mlr.press/v37/kusnerb15.pdf</a>
</div>
<div id="ref-landauer:1997" class="csl-entry">
Landauer, T. K., &amp; Dumais, S. T. (1997). A solution to plato’s
problem: The latent semantic analysis theory of acquisition, induction,
and representation of knowledge. <em>Psychological Review</em>,
<em>104</em>, 211. <a href="https://www.cis.upenn.edu/~ungar/dbmwiki/LSA.pdf" class="external-link">https://www.cis.upenn.edu/~ungar/dbmwiki/LSA.pdf</a>
</div>
<div id="ref-mikolov:2013" class="csl-entry">
Mikolov, T., Yih, W., &amp; Zweig, G. (2013). Linguistic regularities in
continuous space word representations. <em>Proceedings of the 2013
Conference of the North American Chapter of the Association for
Computational Linguistics: Human Language Technologies</em>, 746–751. <a href="https://www.aclweb.org/anthology/N13-1090.pdf" class="external-link">https://www.aclweb.org/anthology/N13-1090.pdf</a>
</div>
<div id="ref-thurstone:1934" class="csl-entry">
Thurstone, L. L. (1934). The vectors of mind. <em>Psychological
Review</em>, <em>41</em>, 1. <a href="https://pdfs.semanticscholar.org/9cf4/f58f7f8e8e42b743834b540481ef5cb5903d.pdf" class="external-link">https://pdfs.semanticscholar.org/9cf4/f58f7f8e8e42b743834b540481ef5cb5903d.pdf</a>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
