<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="lingmatch">
<title>Introduction to Text Analysis • lingmatch</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Introduction to Text Analysis">
<meta property="og:description" content="lingmatch">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">lingmatch</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.5</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Guides</h6>
    <a class="dropdown-item" href="../articles/quickstart.html">Quick Start</a>
    <a class="dropdown-item" href="../articles/groups.html">Group Comparisons</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Introductions</h6>
    <a class="dropdown-item" href="../articles/introduction.html">Text Analysis</a>
    <a class="dropdown-item" href="../articles/word_vectors.html">Word Vectors</a>
    <a class="dropdown-item" href="../articles/text_classification.html">Text Classification</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/miserman/lingmatch/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Introduction to Text Analysis</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/miserman/lingmatch/blob/HEAD/vignettes/introduction.Rmd" class="external-link"><code>vignettes/introduction.Rmd</code></a></small>
      <div class="d-none name"><code>introduction.Rmd</code></div>
    </div>

    
    
<p>This introduction uses lingmatch to illustrate a few of the many
branching paths of text analysis.</p>
<p><em>Built with R 4.2.1 on September 05 2022</em></p>
<hr>
<div class="section level2">
<h2 id="setup">Setup<a class="anchor" aria-label="anchor" href="#setup"></a>
</h2>
<p>First, we need some text – anything that results in a vector of text
will do.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">text</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"Hey, I like kittens. I think all kinds of cats really are just the best pet ever."</span>,</span>
<span>  <span class="st">"Oh yeah? Well I really like cars. All the wheels and the turbos... I think that's</span></span>
<span><span class="st">   the best ever."</span>,</span>
<span>  <span class="st">"You know what? Poo on you. Cats, dogs, rabbits -- you know, living creatures... to</span></span>
<span><span class="st">   think you'd care about anything else!"</span>,</span>
<span>  <span class="st">"You can stick to your opinion. You can not be right if you want. You know what</span></span>
<span><span class="st">   life's about? Supercharging, diesel guzzling, exhaust spewing, piston moving</span></span>
<span><span class="st">   ignitions."</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="manual-processing">Manual Processing<a class="anchor" aria-label="anchor" href="#manual-processing"></a>
</h3>
<p>We’ll be taking a ‘bag of words’ approach to this text, which means
standardizing and aggregating words for the sake of simplicity.</p>
<p>The first step can be to convert all of the characters to lower
case:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># we'll name the processed text "words" since it will eventually be single words</span></span>
<span><span class="va">words</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/chartr.html" class="external-link">tolower</a></span><span class="op">(</span><span class="va">text</span><span class="op">)</span></span>
<span><span class="va">words</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span><span class="co">#&gt; [1] "hey, i like kittens. i think all kinds of cats really are just the best pet ever."</span></span></code></pre></div>
<p>Another standardizing step can be to remove punctuation, which will
involve some regular expression.</p>
<p><a href="https://en.wikipedia.org/wiki/Regular_expression" class="external-link">Regular
expression</a> is a refined way to parse strings of characters. Forms of
regular expression are implemented in most programming languages. It can
be tricky to think with, but offers a great deal of control when it
comes to parsing text.</p>
<p>We can use the gsub function to replace all of the characters we
specify with nothing.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># you can get a feel for the way gsub works by entering an example string;</span></span>
<span><span class="co"># the first argument is the expression to match, the second is what to replace it with,</span></span>
<span><span class="co"># and the third is the text, so this will replace the blank space with an asterisk</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">" "</span>, <span class="st">"*"</span>, <span class="st">"a b"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "a*b"</span></span>
<span></span>
<span><span class="co"># []s define a set of single characters, and the + will match any repeats,</span></span>
<span><span class="co"># so one or more of the characters inside the brackets will be replaced with nothing.</span></span>
<span><span class="co"># entering a vector into the third position will apply the replacement to each element</span></span>
<span><span class="va">words</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">"[,.?!\n-]+"</span>, <span class="st">""</span>, <span class="va">words</span><span class="op">)</span></span>
<span><span class="va">words</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span><span class="co">#&gt; [1] "hey i like kittens i think all kinds of cats really are just the best pet ever"</span></span></code></pre></div>
<p>The strsplit function splits one string into many based on a regular
expression string.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># this applies to each element of the vector, and returns a list of vectors</span></span>
<span><span class="va">words</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/strsplit.html" class="external-link">strsplit</a></span><span class="op">(</span><span class="va">words</span>, <span class="st">" +"</span><span class="op">)</span></span></code></pre></div>
<p>Now we have a list of tokens (the <code>words</code> object) which
corresponds to our original text:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># the first text</span></span>
<span><span class="va">text</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span><span class="co">#&gt; [1] "Hey, I like kittens. I think all kinds of cats really are just the best pet ever."</span></span>
<span></span>
<span><span class="co"># the tokenized version of that text</span></span>
<span><span class="va">words</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="co">#&gt;  [1] "hey"     "i"       "like"    "kittens" "i"       "think"   "all"    </span></span>
<span><span class="co">#&gt;  [8] "kinds"   "of"      "cats"    "really"  "are"     "just"    "the"    </span></span>
<span><span class="co">#&gt; [15] "best"    "pet"     "ever"</span></span></code></pre></div>
<p>Now that we have all of our words separated, we can translate the
original texts into numerical vectors, resulting in a document-term
matrix (DTM).</p>
<p>The first step can be to set up an empty matrix, with a row for each
text, and a column for each unique word:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># since our words are in a list, we need to unlist them, then get only the unique ones</span></span>
<span><span class="co"># you don't need to sort the words, but it can make it easier to look through</span></span>
<span><span class="va">unique_words</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="va">words</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># then we can make a matrix of 0s, and put the unique words in as column names</span></span>
<span><span class="va">dtm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span></span>
<span>  <span class="fl">0</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">text</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">unique_words</span><span class="op">)</span>,</span>
<span>  dimnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="cn">NULL</span>, <span class="va">unique_words</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">dtm</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span></span>
<span><span class="co">#&gt;      about all and anything are be best can care cars</span></span>
<span><span class="co">#&gt; [1,]     0   0   0        0   0  0    0   0    0    0</span></span>
<span><span class="co">#&gt; [2,]     0   0   0        0   0  0    0   0    0    0</span></span>
<span><span class="co">#&gt; [3,]     0   0   0        0   0  0    0   0    0    0</span></span>
<span><span class="co">#&gt; [4,]     0   0   0        0   0  0    0   0    0    0</span></span></code></pre></div>
<p>Now we can fill the matrix with counts for each word for each text.
We can count up all of the words at once, so we only have to loop
through texts:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># this will perform what's inside the curly brackets as many times as there are texts</span></span>
<span><span class="co"># i will be set to each number in the sequence, so i will equal 1 on the first run</span></span>
<span><span class="co"># the words and dtm objects all line up, so words[[i]] corresponds to dtm[i,]</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">words</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span></span>
<span>  <span class="co"># we can use the table function to count the words in a text</span></span>
<span>  <span class="va">counts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">words</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co"># now the counts object has words associated with their count for the ith text</span></span>
<span>  <span class="co"># to get this into the dtm, we can use i to select the row,</span></span>
<span>  <span class="co"># and counts' names to select the columns</span></span>
<span>  <span class="va">dtm</span><span class="op">[</span><span class="va">i</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">counts</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">counts</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># now dtm is filled in with counts for each text</span></span>
<span><span class="va">dtm</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span></span>
<span><span class="co">#&gt;      about all and anything are be best can care cars</span></span>
<span><span class="co">#&gt; [1,]     0   1   0        0   1  0    1   0    0    0</span></span>
<span><span class="co">#&gt; [2,]     0   1   1        0   0  0    1   0    0    1</span></span>
<span><span class="co">#&gt; [3,]     1   0   0        1   0  0    0   0    1    0</span></span>
<span><span class="co">#&gt; [4,]     1   0   0        0   0  1    0   2    0    0</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="processing-with-lingmatch">Processing with lingmatch<a class="anchor" aria-label="anchor" href="#processing-with-lingmatch"></a>
</h3>
<p>The lma_dtm function from the lingmatch package will do the same sort
of processing we just walked through.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># load in the lingmatch package</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/miserman/lingmatch" class="external-link">lingmatch</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">dtm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/lma_dtm.html">lma_dtm</a></span><span class="op">(</span><span class="va">text</span>, sparse <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">dtm</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span></span>
<span><span class="co">#&gt;      about all and anything are be best can care cars</span></span>
<span><span class="co">#&gt; [1,]     0   1   0        0   1  0    1   0    0    0</span></span>
<span><span class="co">#&gt; [2,]     0   1   1        0   0  0    1   0    0    1</span></span>
<span><span class="co">#&gt; [3,]     1   0   0        1   0  0    0   0    1    0</span></span>
<span><span class="co">#&gt; [4,]     1   0   0        0   0  1    0   2    0    0</span></span></code></pre></div>
<p>With even this simple level of processing, we can get some fun
information:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># a count of words across documents (total/global term count; collection frequency)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/Matrix/man/colSums.html" class="external-link">colSums</a></span><span class="op">(</span><span class="va">dtm</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span></span>
<span><span class="co">#&gt;    about      all      and anything      are </span></span>
<span><span class="co">#&gt;        2        2        1        1        1</span></span>
<span></span>
<span><span class="co"># a count of words in each document (word counts; document length)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/Matrix/man/colSums.html" class="external-link">rowSums</a></span><span class="op">(</span><span class="va">dtm</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 17 19 20 27</span></span>
<span></span>
<span><span class="co"># correlation between words (word vector similarity)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/cor.html" class="external-link">cor</a></span><span class="op">(</span><span class="va">dtm</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span></span>
<span><span class="co">#&gt;               about        all        and   anything        are</span></span>
<span><span class="co">#&gt; about     1.0000000 -1.0000000 -0.5773503  0.5773503 -0.5773503</span></span>
<span><span class="co">#&gt; all      -1.0000000  1.0000000  0.5773503 -0.5773503  0.5773503</span></span>
<span><span class="co">#&gt; and      -0.5773503  0.5773503  1.0000000 -0.3333333 -0.3333333</span></span>
<span><span class="co">#&gt; anything  0.5773503 -0.5773503 -0.3333333  1.0000000 -0.3333333</span></span>
<span><span class="co">#&gt; are      -0.5773503  0.5773503 -0.3333333 -0.3333333  1.0000000</span></span>
<span></span>
<span><span class="co"># correlation between texts (document similarity)</span></span>
<span><span class="fu"><a href="../reference/lma_simets.html">lma_simets</a></span><span class="op">(</span><span class="va">dtm</span>, <span class="st">"pearson"</span><span class="op">)</span></span>
<span><span class="co">#&gt; 4 x 4 sparse Matrix of class "dtCMatrix" (unitriangular)</span></span>
<span><span class="co">#&gt;                                      </span></span>
<span><span class="co">#&gt; [1,]  I          .         .        .</span></span>
<span><span class="co">#&gt; [2,]  0.4322086  I         .        .</span></span>
<span><span class="co">#&gt; [3,] -0.2319170 -0.2721224 I        .</span></span>
<span><span class="co">#&gt; [4,] -0.4062182 -0.3727363 0.309349 I</span></span></code></pre></div>
<p>This is getting into the fundamentals of information
extraction/retrieval, where, for example, term similarity can be used to
enhance searches, and document similarity can be the search criteria.
Document similarity is also secretly linguistic similarity.</p>
</div>
</div>
<div class="section level2">
<h2 id="documentterm-weighting">Document/Term Weighting<a class="anchor" aria-label="anchor" href="#documentterm-weighting"></a>
</h2>
<p>Using just raw word counts, common words have more weight –
potentially many times more. Often, we’re more interested in less common
words, as those tend to be more meaningful (they tend to be content
words, as opposed to function words, and can better distinguish relevant
texts to a search).</p>
<p>The most simple, straightforward way to adjust the weight of words is
to transform their count values. For example, log transformations reduce
the difference between values, and increase that reduction as values
increase:</p>
<p><code>log(2) - log(1)</code> = 0.6931472</p>
<p><code>log(5) - log(4)</code> = 0.2231436</p>
<p>Another source of weighting can come from matrix-wide information,
such as document or term counts. For example, dividing a term by its
document frequency reduces the weight of more frequent terms:</p>
<p><code>c(1, 1, 0) / sum(c(1, 1, 0))</code> = 0.5, 0.5, 0</p>
<p><code>c(1, 1, 1) / sum(c(1, 1, 1))</code> = 0.3333333, 0.3333333,
0.3333333</p>
<p>Different weighting schemes work to either amplify or dampen
difference in values or in document or term frequencies. See
<code><a href="../reference/lma_weight.html">?lma_weight</a></code> for more about available schemes.</p>
<p>To get a better sense of the effects each scheme component might
have, we can plot weighted by raw word counts across a range of document
frequencies:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># load in the splot package</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://miserman.github.io/splot/" class="external-link">splot</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># available term weight types</span></span>
<span><span class="va">term_weights</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"binary"</span>, <span class="st">"log"</span>, <span class="st">"sqrt"</span>, <span class="st">"count"</span>, <span class="st">"amplify"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># apply each type of weighting to a 1:20 sequence</span></span>
<span><span class="va">Weighted</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">term_weights</span>, <span class="kw">function</span><span class="op">(</span><span class="va">w</span><span class="op">)</span> <span class="fu"><a href="../reference/lma_weight.html">lma_weight</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">20</span>, <span class="va">w</span>, <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># plot weighted ~ raw term frequencies</span></span>
<span><span class="co">## note that dark = TRUE makes the text white, so you might need to remove it</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/splot/man/splot.html" class="external-link">splot</a></span><span class="op">(</span><span class="va">Weighted</span> <span class="op">~</span> <span class="fl">1</span><span class="op">:</span><span class="fl">20</span>, labx <span class="op">=</span> <span class="st">"Raw Count"</span>, lines <span class="op">=</span> <span class="st">"connected"</span>, dark <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="introduction_files/figure-html/unnamed-chunk-11-1.svg" width="960"></p>
<p>And plot weighted by a range of variants of raw document frequencies.
The y-axis shows relative values (z-scores), with positive being higher
than the weight’s mean. From this, you can see what types of terms the
scheme gives more weight:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># available document weight types</span></span>
<span><span class="va">doc_weights</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"df"</span>, <span class="st">"dflog"</span>, <span class="st">"dfmax"</span>, <span class="st">"dfmlog"</span>, <span class="st">"normal"</span>,</span>
<span>  <span class="st">"idf"</span>, <span class="st">"ridf"</span>, <span class="st">"dpois"</span>, <span class="st">"ppois"</span>, <span class="st">"entropy"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># function to demonstrates weights over a range document frequencies</span></span>
<span><span class="va">weight_range</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">w</span>, <span class="va">value</span> <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/diag.html" class="external-link">diag</a></span><span class="op">(</span><span class="fl">20</span><span class="op">)</span></span>
<span>  <span class="va">m</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/lower.tri.html" class="external-link">upper.tri</a></span><span class="op">(</span><span class="va">m</span>, <span class="cn">TRUE</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">is.numeric</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">value</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span></span>
<span>      <span class="fl">1</span><span class="op">:</span><span class="fl">20</span>, <span class="kw">function</span><span class="op">(</span><span class="va">v</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="kw">if</span> <span class="op">(</span><span class="va">value</span> <span class="op">==</span> <span class="st">"inverted"</span><span class="op">)</span> <span class="fl">21</span> <span class="op">-</span> <span class="va">v</span> <span class="kw">else</span> <span class="va">v</span>, <span class="va">v</span><span class="op">)</span></span>
<span>    <span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span>  <span class="fu"><a href="../reference/lma_weight.html">lma_weight</a></span><span class="op">(</span><span class="va">m</span>, <span class="va">w</span>, <span class="cn">FALSE</span>, doc.only <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># categories of weightings for coloring</span></span>
<span><span class="va">category</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"df"</span>, <span class="st">"normal"</span>, <span class="st">"idf"</span>, <span class="st">"poisson"</span>, <span class="st">"entropy"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># set up options for reuse</span></span>
<span><span class="va">op</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  laby <span class="op">=</span> <span class="st">"Relative (Scaled) Weight"</span>, labx <span class="op">=</span> <span class="st">"Document Frequency"</span>,</span>
<span>  leg <span class="op">=</span> <span class="st">"outside"</span>, colorby <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">quote</a></span><span class="op">(</span><span class="va">category</span><span class="op">)</span>, grade <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  lines <span class="op">=</span> <span class="st">"connected"</span>, mv.scale <span class="op">=</span> <span class="cn">TRUE</span>, note <span class="op">=</span> <span class="cn">FALSE</span>, dark <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># then plot a few different examples</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/splot/man/splot.html" class="external-link">splot</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">doc_weights</span>, <span class="va">weight_range</span><span class="op">)</span> <span class="op">~</span> <span class="fl">1</span><span class="op">:</span><span class="fl">20</span>,</span>
<span>  options <span class="op">=</span> <span class="va">op</span>, title <span class="op">=</span> <span class="st">"Same Term, Varying Document Frequencies"</span>,</span>
<span>  sud <span class="op">=</span> <span class="st">"All term frequencies are 1."</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="introduction_files/figure-html/unnamed-chunk-12-1.svg" width="960"></p>
<p>Some document weight types are sensitive to term frequency, so it can
be interesting to see two extremes:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># here, counts increase from 1 to 20, and appear in 1 to 20 documents,</span></span>
<span><span class="co"># so less common terms also have lower term frequencies</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/splot/man/splot.html" class="external-link">splot</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">doc_weights</span>, <span class="va">weight_range</span>, value <span class="op">=</span> <span class="st">"sequence"</span><span class="op">)</span> <span class="op">~</span> <span class="fl">1</span><span class="op">:</span><span class="fl">20</span>,</span>
<span>  options <span class="op">=</span> <span class="va">op</span>, title <span class="op">=</span> <span class="st">"Term as Document Frequencies"</span>,</span>
<span>  sud <span class="op">=</span> <span class="st">"Non-zero terms are the number of non-zero terms."</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="introduction_files/figure-html/unnamed-chunk-13-1.svg" width="960"></p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># here, counts decrease from 20 to 1, while appearing in 1 to 20 documents,</span></span>
<span><span class="co"># so less common terms have higher term frequencies</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/splot/man/splot.html" class="external-link">splot</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">doc_weights</span>, <span class="va">weight_range</span>, value <span class="op">=</span> <span class="st">"inverted"</span><span class="op">)</span> <span class="op">~</span> <span class="fl">1</span><span class="op">:</span><span class="fl">20</span>,</span>
<span>  options <span class="op">=</span> <span class="va">op</span>, title <span class="op">=</span> <span class="st">"Term Opposite of Document Frequencies"</span>,</span>
<span>  sud <span class="op">=</span> <span class="st">"Non-zero terms are the number of zero terms + 1."</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="introduction_files/figure-html/unnamed-chunk-13-2.svg" width="960"></p>
<p>We can weight our example dtm and see how it affects the correlation
between documents:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># idf dampens common words</span></span>
<span><span class="fu"><a href="../reference/lma_simets.html">lma_simets</a></span><span class="op">(</span><span class="fu"><a href="../reference/lma_weight.html">lma_weight</a></span><span class="op">(</span><span class="va">dtm</span>, <span class="st">"idf"</span><span class="op">)</span>, <span class="st">"pearson"</span><span class="op">)</span></span>
<span><span class="co">#&gt; 4 x 4 sparse Matrix of class "dtCMatrix" (unitriangular)</span></span>
<span><span class="co">#&gt;                                         </span></span>
<span><span class="co">#&gt; [1,]  I           .          .         .</span></span>
<span><span class="co">#&gt; [2,]  0.03946144  I          .         .</span></span>
<span><span class="co">#&gt; [3,] -0.30972726 -0.3372407  I         .</span></span>
<span><span class="co">#&gt; [4,] -0.42504381 -0.4232513 -0.1271555 I</span></span>
<span></span>
<span><span class="co"># whereas Poisson amplifies common words</span></span>
<span><span class="fu"><a href="../reference/lma_simets.html">lma_simets</a></span><span class="op">(</span><span class="fu"><a href="../reference/lma_weight.html">lma_weight</a></span><span class="op">(</span><span class="va">dtm</span>, <span class="st">"ppois"</span><span class="op">)</span>, <span class="st">"pearson"</span><span class="op">)</span></span>
<span><span class="co">#&gt; 4 x 4 sparse Matrix of class "dtCMatrix" (unitriangular)</span></span>
<span><span class="co">#&gt;                                         </span></span>
<span><span class="co">#&gt; [1,]  I           .          .         .</span></span>
<span><span class="co">#&gt; [2,]  0.85434575  I          .         .</span></span>
<span><span class="co">#&gt; [3,] -0.03475687 -0.03813932 I         .</span></span>
<span><span class="co">#&gt; [4,] -0.05282330 -0.04472950 0.9891512 I</span></span></code></pre></div>
<p>For now, we’ll just apply standard word count (frequency) weighting,
sometimes called normalization:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wdtm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/lma_weight.html">lma_weight</a></span><span class="op">(</span><span class="va">dtm</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="dimension-reduction">Dimension Reduction<a class="anchor" aria-label="anchor" href="#dimension-reduction"></a>
</h2>
<p>A more thorough way to change the dtm space is by reducing its
dimensions. This is effectively what <a href="http://liwc.wpengine.com" class="external-link">LIWC</a> (or any dictionary-based
approach) does – reducing the number of terms by combining them into
categories.</p>
<p>The default, internal dictionary (<code><a href="../reference/lma_dict.html">?lma_dict</a></code>) contains
function word categories:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rwdtm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/lma_termcat.html">lma_termcat</a></span><span class="op">(</span><span class="va">wdtm</span><span class="op">)</span></span>
<span><span class="va">rwdtm</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span></span>
<span><span class="co">#&gt;          ppron      ipron    article     adverb       conj       prep</span></span>
<span><span class="co">#&gt; [1,] 0.1176471 0.00000000 0.05882353 0.17647059 0.00000000 0.05882353</span></span>
<span><span class="co">#&gt; [2,] 0.1052632 0.05263158 0.15789474 0.15789474 0.05263158 0.00000000</span></span>
<span><span class="co">#&gt; [3,] 0.2000000 0.10000000 0.00000000 0.00000000 0.05000000 0.15000000</span></span>
<span><span class="co">#&gt; [4,] 0.1851852 0.03703704 0.00000000 0.07407407 0.03703704 0.07407407</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="language-style-matching">Language Style Matching<a class="anchor" aria-label="anchor" href="#language-style-matching"></a>
</h2>
<p>The way we’ve set things up allows us to look at the standard
Language Style Matching calculation:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/lma_simets.html">lma_simets</a></span><span class="op">(</span><span class="va">rwdtm</span>, <span class="st">"canberra"</span><span class="op">)</span></span>
<span><span class="co">#&gt; 4 x 4 sparse Matrix of class "dtCMatrix" (unitriangular)</span></span>
<span><span class="co">#&gt;                                     </span></span>
<span><span class="co">#&gt; [1,] I         .         .         .</span></span>
<span><span class="co">#&gt; [2,] 0.4862434 I         .         .</span></span>
<span><span class="co">#&gt; [3,] 0.2560134 0.4837410 I         .</span></span>
<span><span class="co">#&gt; [4,] 0.3273152 0.3350735 0.5571444 I</span></span>
<span></span>
<span><span class="co"># you could get the same thing from the lsm default</span></span>
<span><span class="fu"><a href="../reference/lingmatch.html">lingmatch</a></span><span class="op">(</span><span class="va">text</span>, type <span class="op">=</span> <span class="st">"lsm"</span><span class="op">)</span><span class="op">$</span><span class="va">sim</span></span>
<span><span class="co">#&gt; 4 x 4 sparse Matrix of class "dtCMatrix" (unitriangular)</span></span>
<span><span class="co">#&gt;                                     </span></span>
<span><span class="co">#&gt; [1,] I         .         .         .</span></span>
<span><span class="co">#&gt; [2,] 0.4862434 I         .         .</span></span>
<span><span class="co">#&gt; [3,] 0.2560134 0.4837410 I         .</span></span>
<span><span class="co">#&gt; [4,] 0.3273152 0.3350735 0.5571444 I</span></span></code></pre></div>
<p>What makes language style matching “Language Style Matching” is our
choice of weighting, dimension reduction, and similarity metric.</p>
</div>
<div class="section level2">
<h2 id="latent-semantic-similarity">Latent Semantic Similarity<a class="anchor" aria-label="anchor" href="#latent-semantic-similarity"></a>
</h2>
<p>For example, if we were to exclude function words, weight by term
frequency - inverse document frequency, use a latent semantic space to
reduce dimensions, and cosine similarity to measure matching, it would
be “latent semantic similarity”:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dtm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/lma_dtm.html">lma_dtm</a></span><span class="op">(</span><span class="va">text</span>, <span class="st">"function"</span><span class="op">)</span></span>
<span><span class="va">wdtm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/lma_weight.html">lma_weight</a></span><span class="op">(</span><span class="va">dtm</span>, <span class="st">"tf-idf"</span><span class="op">)</span></span>
<span><span class="va">rwdtm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/lma_lspace.html">lma_lspace</a></span><span class="op">(</span><span class="va">wdtm</span>, space <span class="op">=</span> <span class="st">"100k"</span>, dir <span class="op">=</span> <span class="st">"~/Latent Semantic Spaces"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/lma_simets.html">lma_simets</a></span><span class="op">(</span><span class="va">rwdtm</span>, <span class="st">"cosine"</span><span class="op">)</span></span>
<span><span class="co">#&gt; 4 x 4 sparse Matrix of class "dtCMatrix" (unitriangular)</span></span>
<span><span class="co">#&gt;                                     </span></span>
<span><span class="co">#&gt; [1,] I         .         .         .</span></span>
<span><span class="co">#&gt; [2,] 0.5368533 I         .         .</span></span>
<span><span class="co">#&gt; [3,] 0.8737899 0.4574263 I         .</span></span>
<span><span class="co">#&gt; [4,] 0.6336500 0.8192378 0.5609665 I</span></span></code></pre></div>
<hr>
<div style="text-align:center">
<div class="figure">
<img src="https://www.depts.ttu.edu/psy/lusi/files/lusi_transp.png" alt=""><p class="caption">Brought to you by the
<a href="https://www.depts.ttu.edu/psy/lusi/resources.php" target="_blank" class="external-link">Language
Use and Social Interaction</a> lab at Texas Tech University</p>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
