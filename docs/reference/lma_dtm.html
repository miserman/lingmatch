<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Document-Term Matrix Creation — lma_dtm • lingmatch</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Document-Term Matrix Creation — lma_dtm"><meta name="description" content="Creates a document-term matrix (dtm) from a set of texts."><meta property="og:description" content="Creates a document-term matrix (dtm) from a set of texts."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-dark" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">lingmatch</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.8</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><h6 class="dropdown-header" data-toc-skip>Guides</h6></li>
    <li><a class="dropdown-item" href="../articles/quickstart.html">Quick Start</a></li>
    <li><a class="dropdown-item" href="../articles/groups.html">Group Comparisons</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Introductions</h6></li>
    <li><a class="dropdown-item" href="../articles/introduction.html">Text Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/word_vectors.html">Word Vectors</a></li>
    <li><a class="dropdown-item" href="../articles/text_classification.html">Text Classification</a></li>
    <li><a class="dropdown-item" href="../articles/dictionary_creation.html">Dictionary Creation</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/miserman/lingmatch/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Document-Term Matrix Creation</h1>
      <small class="dont-index">Source: <a href="https://github.com/miserman/lingmatch/blob/HEAD/R/lma_dtm.R" class="external-link"><code>R/lma_dtm.R</code></a></small>
      <div class="d-none name"><code>lma_dtm.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Creates a document-term matrix (dtm) from a set of texts.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">lma_dtm</span><span class="op">(</span><span class="va">text</span>, exclude <span class="op">=</span> <span class="cn">NULL</span>, context <span class="op">=</span> <span class="cn">NULL</span>, replace.special <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  numbers <span class="op">=</span> <span class="cn">FALSE</span>, punct <span class="op">=</span> <span class="cn">FALSE</span>, urls <span class="op">=</span> <span class="cn">TRUE</span>, emojis <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  to.lower <span class="op">=</span> <span class="cn">TRUE</span>, word.break <span class="op">=</span> <span class="st">" +"</span>, dc.min <span class="op">=</span> <span class="fl">0</span>, dc.max <span class="op">=</span> <span class="cn">Inf</span>,</span>
<span>  sparse <span class="op">=</span> <span class="cn">TRUE</span>, tokens.only <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-text">text<a class="anchor" aria-label="anchor" href="#arg-text"></a></dt>
<dd><p>Texts to be processed. This can be a vector (such as a column in a data frame)
or list. When a list, these can be in the form returned with <code>tokens.only = TRUE</code>,
or a list with named vectors, where names are tokens and values are frequencies or the like.</p></dd>


<dt id="arg-exclude">exclude<a class="anchor" aria-label="anchor" href="#arg-exclude"></a></dt>
<dd><p>A character vector of words to be excluded. If <code>exclude</code> is a single string
matching <code>'function'</code>, <code>lma_dict(1:9)</code> will be used.</p></dd>


<dt id="arg-context">context<a class="anchor" aria-label="anchor" href="#arg-context"></a></dt>
<dd><p>A character vector used to reformat text based on look- ahead/behind. For example,
you might attempt to disambiguate <em>like</em> by reformatting certain <em>like</em>s
(e.g., <code>context = c('(i) like*', '(you) like*', '(do) like')</code>, where words in parentheses are
the context for the target word, and asterisks denote partial matching). This would be converted
to regular expression (i.e., <code>'(? &lt;= i) like\\b'</code>) which, if matched, would be
replaced with a coded version of the word (e.g., <code>"Hey, i like that!"</code> would become
<code>"Hey, i i-like that!"</code>). This would probably only be useful for categorization, where a
dictionary would only include one or another version of a word (e.g., the LIWC 2015 dictionary
does something like this with <em>like</em>, and LIWC 2007 did something like this with
<em>kind (of)</em>, both to try and clean up the posemo category).</p></dd>


<dt id="arg-replace-special">replace.special<a class="anchor" aria-label="anchor" href="#arg-replace-special"></a></dt>
<dd><p>Logical: if <code>TRUE</code>, special characters are replaced with regular
equivalents using the <code><a href="lma_dict.html">lma_dict</a></code> special function.</p></dd>


<dt id="arg-numbers">numbers<a class="anchor" aria-label="anchor" href="#arg-numbers"></a></dt>
<dd><p>Logical: if <code>TRUE</code>, numbers are preserved.</p></dd>


<dt id="arg-punct">punct<a class="anchor" aria-label="anchor" href="#arg-punct"></a></dt>
<dd><p>Logical: if <code>TRUE</code>, punctuation is preserved.</p></dd>


<dt id="arg-urls">urls<a class="anchor" aria-label="anchor" href="#arg-urls"></a></dt>
<dd><p>Logical: if <code>FALSE</code>, attempts to replace all urls with "repurl".</p></dd>


<dt id="arg-emojis">emojis<a class="anchor" aria-label="anchor" href="#arg-emojis"></a></dt>
<dd><p>Logical: if <code>TRUE</code>, attempts to replace emojis (e.g., ":(" would be replaced
with "repfrown").</p></dd>


<dt id="arg-to-lower">to.lower<a class="anchor" aria-label="anchor" href="#arg-to-lower"></a></dt>
<dd><p>Logical: if <code>FALSE</code>, words with different capitalization are treated as
different terms.</p></dd>


<dt id="arg-word-break">word.break<a class="anchor" aria-label="anchor" href="#arg-word-break"></a></dt>
<dd><p>A regular expression string determining the way words are split. Default is
<code>' +'</code> which breaks words at one or more blank spaces. You may also like to break by
dashes or slashes (<code>'[ /-]+'</code>), depending on the text.</p></dd>


<dt id="arg-dc-min">dc.min<a class="anchor" aria-label="anchor" href="#arg-dc-min"></a></dt>
<dd><p>Numeric: excludes terms appearing in the set number or fewer documents.
Default is 0 (no limit).</p></dd>


<dt id="arg-dc-max">dc.max<a class="anchor" aria-label="anchor" href="#arg-dc-max"></a></dt>
<dd><p>Numeric: excludes terms appearing in the set number or more. Default
is Inf (no limit).</p></dd>


<dt id="arg-sparse">sparse<a class="anchor" aria-label="anchor" href="#arg-sparse"></a></dt>
<dd><p>Logical: if <code>FALSE</code>, a regular dense matrix is returned.</p></dd>


<dt id="arg-tokens-only">tokens.only<a class="anchor" aria-label="anchor" href="#arg-tokens-only"></a></dt>
<dd><p>Logical: if <code>TRUE</code>, returns a list rather than a matrix, with these entries:</p><table class="table table"><tr><td><code>tokens</code></td><td>A vector of indices with terms as names.</td></tr><tr><td><code>frequencies</code></td><td>A vector of counts with terms as names.</td></tr><tr><td><code>WC</code></td><td>A vector of term counts for each document.</td></tr><tr><td><code>indices</code></td><td>A list with a vector of token indices for each document.</td></tr></table></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A sparse matrix (or regular matrix if <code>sparse = FALSE</code>), with a row per <code>text</code>,
and column per term, or a list if <code>tokens.only = TRUE</code>. Includes an attribute with options (<code>opts</code>),
and attributes with word count (<code>WC</code>) and column sums (<code>colsums</code>) if <code>tokens.only = FALSE</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>This is a relatively simple way to make a dtm. To calculate the (more or less) standard forms of
LSM and LSS, a somewhat raw dtm should be fine, because both processes essentially use
dictionaries (obviating stemming) and weighting or categorization (largely obviating 'stop word'
removal). The exact effect of additional processing will depend on the dictionary/semantic space
and weighting scheme used (particularly for LSA). This function also does some processing which
may matter if you plan on categorizing with categories that have terms with look- ahead/behind assertions
(like LIWC dictionaries). Otherwise, other methods may be faster, more memory efficient, and/or more featureful.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">text</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="st">"Why, hello there! How are you this evening?"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"I am well, thank you for your inquiry!"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"You are a most good at social interactions person!"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"Why, thank you! You're not all bad yourself!"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">lma_dtm</span><span class="op">(</span><span class="va">text</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 x 27 sparse Matrix of class "dgCMatrix"</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   [[ suppressing 27 column names 'a', 'all', 'am' ... ]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] . . . 1 . . 1 . . 1 1 . . . . . . . . 1 1 . 1 1 . . .</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] . . 1 . . . . 1 . . . 1 1 . . . . . 1 . . 1 . 1 . 1 .</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,] 1 . . 1 1 . . . 1 . . . . 1 1 . 1 1 . . . . . 1 . . .</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,] . 1 . . . 1 . . . . . . . . . 1 . . 1 . . . 1 1 1 . 1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># return tokens only</span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="va">tokens</span> <span class="op">&lt;-</span> <span class="fu">lma_dtm</span><span class="op">(</span><span class="va">text</span>, tokens.only <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $tokens</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            a          all           am          are           at          bad </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            1            2            3            4            5            6 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      evening          for         good        hello          how            i </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            7            8            9           10           11           12 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      inquiry interactions         most          not       person       social </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           13           14           15           16           17           18 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        thank        there         this         well          why          you </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           19           20           21           22           23           24 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       you're         your     yourself </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           25           26           27 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $frequencies</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            a          all           am          are           at          bad </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            1            1            1            2            1            1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      evening          for         good        hello          how            i </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            1            1            1            1            1            1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      inquiry interactions         most          not       person       social </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            1            1            1            1            1            1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        thank        there         this         well          why          you </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            2            1            1            1            2            4 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       you're         your     yourself </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            1            1            1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $WC</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 8 8 9 8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $indices</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $indices[[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 23 10 20 11  4 24 21  7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $indices[[2]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 12  3 22 19 24  8 26 13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $indices[[3]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 24  4  1 15  9  5 18 14 17</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $indices[[4]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 23 19 24 25 16  2  6 27</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"opts")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  numbers    punct     urls to.lower </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    FALSE    FALSE     TRUE     TRUE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"time")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> dtm </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   0 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## convert those to a regular DTM</span></span></span>
<span class="r-in"><span><span class="fu">lma_dtm</span><span class="op">(</span><span class="va">tokens</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 x 27 sparse Matrix of class "dgCMatrix"</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   [[ suppressing 27 column names 'a', 'all', 'am' ... ]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] . . . 1 . . 1 . . 1 1 . . . . . . . . 1 1 . 1 1 . . .</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] . . 1 . . . . 1 . . . 1 1 . . . . . 1 . . 1 . 1 . 1 .</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,] 1 . . 1 1 . . . 1 . . . . 1 1 . 1 1 . . . . . 1 . . .</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,] . 1 . . . 1 . . . . . . . . . 1 . . 1 . . . 1 1 1 . 1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># convert a list-representation to a sparse matrix</span></span></span>
<span class="r-in"><span><span class="fu">lma_dtm</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  doc1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>why <span class="op">=</span> <span class="fl">1</span>, hello <span class="op">=</span> <span class="fl">1</span>, there <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  doc2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>i <span class="op">=</span> <span class="fl">1</span>, am <span class="op">=</span> <span class="fl">1</span>, well <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 x 6 sparse Matrix of class "dgCMatrix"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      why hello there i am well</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> doc1   1     1     1 .  .    .</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> doc2   .     .     . 1  1    1</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">

</div>

<div class="pkgdown-footer-right">

</div>

    </footer></div>





  </body></html>

